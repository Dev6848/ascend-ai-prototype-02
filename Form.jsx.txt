import React, { useState } from 'react';

const Form = ({ onDataGenerated }) => {
  const [goal, setGoal] = useState('');
  const [interests, setInterests] = useState('');
  const [experience, setExperience] = useState('');

  const handleSubmit = async (e) => {
    e.preventDefault();

    alert("Generating your dashboard. This may take a moment...");

    const response = await fetch('/api/generate', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ goal, interests, experience }),
    });

    const data = await response.json();
    onDataGenerated(data);
  };

  return (
    <div className="form-container">
      <h2>Submit Your Information</h2>
      <form onSubmit={handleSubmit}>
        <div>
          <label htmlFor="goal">What is your main goal? (e.g., Become a data scientist)</label>
          <input type="text" id="goal" value={goal} onChange={(e) => setGoal(e.target.value)} required />
        </div>
        <div>
          <label htmlFor="interests">What are your interests?</label>
          <input type="text" id="interests" value={interests} onChange={(e) => setInterests(e.target.value)} required />
        </div>
        <div>
          <label htmlFor="experience">What is your past experience?</label>
          <input type="text" id="experience" value={experience} onChange={(e) => setExperience(e.target.value)} required />
        </div>
        <button type="submit">Generate My Dashboard</button>
      </form>
    </div>
  );
};

export default Form;